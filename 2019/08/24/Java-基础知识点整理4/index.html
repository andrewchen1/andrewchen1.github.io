<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"blog.andrewchen1.top","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Javaå¼‚å¸¸åˆ†ç±»å’Œå¤„ç†Javaæ³¨è§£ @Target è¡¨ç¤ºè¿™ä¸ªæ³¨è§£ä½¿ç”¨çš„èŒƒå›´  @Retention è¡¨ç¤ºè¿™ä¸ªæ³¨è§£çš„å­˜æ´»æ—¶é—´èŒƒå›´ã€‚æ¯”æ–¹è¯´æ˜¯  ä½œè€…ï¼šRednaxelaFX é“¾æ¥ï¼šhttps:&#x2F;&#x2F;www.zhihu.com&#x2F;question&#x2F;60835139&#x2F;answer&#x2F;180750670 æ¥æºï¼šçŸ¥ä¹ è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚ RetentionPolic">
<meta property="og:type" content="article">
<meta property="og:title" content="Java-åŸºç¡€çŸ¥è¯†ç‚¹æ•´ç†4">
<meta property="og:url" content="https://blog.andrewchen1.top/2019/08/24/Java-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%864/index.html">
<meta property="og:site_name" content="å°å¤«çš„ç¬”è®°">
<meta property="og:description" content="Javaå¼‚å¸¸åˆ†ç±»å’Œå¤„ç†Javaæ³¨è§£ @Target è¡¨ç¤ºè¿™ä¸ªæ³¨è§£ä½¿ç”¨çš„èŒƒå›´  @Retention è¡¨ç¤ºè¿™ä¸ªæ³¨è§£çš„å­˜æ´»æ—¶é—´èŒƒå›´ã€‚æ¯”æ–¹è¯´æ˜¯  ä½œè€…ï¼šRednaxelaFX é“¾æ¥ï¼šhttps:&#x2F;&#x2F;www.zhihu.com&#x2F;question&#x2F;60835139&#x2F;answer&#x2F;180750670 æ¥æºï¼šçŸ¥ä¹ è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚ RetentionPolic">
<meta property="og:locale">
<meta property="og:image" content="http://img.andrewchen1.top/181453414212066.png">
<meta property="og:image" content="http://img.andrewchen1.top/181454040628981.png">
<meta property="article:published_time" content="2019-08-24T05:50:41.000Z">
<meta property="article:modified_time" content="2020-08-30T14:04:37.532Z">
<meta property="article:author" content="å°å¤«">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://img.andrewchen1.top/181453414212066.png">

<link rel="canonical" href="https://blog.andrewchen1.top/2019/08/24/Java-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%864/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-Hans'
  };
</script>

  <title>Java-åŸºç¡€çŸ¥è¯†ç‚¹æ•´ç†4 | å°å¤«çš„ç¬”è®°</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">å°å¤«çš„ç¬”è®°</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">ä½†è¡Œå¥½äº‹ è«é—®å‰ç¨‹</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://blog.andrewchen1.top/2019/08/24/Java-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%864/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="å°å¤«">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å°å¤«çš„ç¬”è®°">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Java-åŸºç¡€çŸ¥è¯†ç‚¹æ•´ç†4
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-08-24 13:50:41" itemprop="dateCreated datePublished" datetime="2019-08-24T13:50:41+08:00">2019-08-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-08-30 22:04:37" itemprop="dateModified" datetime="2020-08-30T22:04:37+08:00">2020-08-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" itemprop="url" rel="index"><span itemprop="name">JavaåŸºç¡€çŸ¥è¯†</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Javaå¼‚å¸¸åˆ†ç±»å’Œå¤„ç†"><a href="#Javaå¼‚å¸¸åˆ†ç±»å’Œå¤„ç†" class="headerlink" title="Javaå¼‚å¸¸åˆ†ç±»å’Œå¤„ç†"></a>Javaå¼‚å¸¸åˆ†ç±»å’Œå¤„ç†</h1><h2 id="Javaæ³¨è§£"><a href="#Javaæ³¨è§£" class="headerlink" title="Javaæ³¨è§£"></a>Javaæ³¨è§£</h2><ul>
<li><p>@Target</p>
<p>è¡¨ç¤ºè¿™ä¸ªæ³¨è§£ä½¿ç”¨çš„èŒƒå›´</p>
</li>
<li><p>@Retention</p>
<p>è¡¨ç¤ºè¿™ä¸ªæ³¨è§£çš„å­˜æ´»æ—¶é—´èŒƒå›´ã€‚æ¯”æ–¹è¯´æ˜¯</p>
<blockquote>
<p>ä½œè€…ï¼šRednaxelaFX</p>
<p>é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/60835139/answer/180750670">https://www.zhihu.com/question/60835139/answer/180750670</a></p>
<p>æ¥æºï¼šçŸ¥ä¹</p>
<p>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<p>RetentionPolicy.SOURCEï¼šåªåœ¨æœ¬ç¼–è¯‘å•å…ƒçš„ç¼–è¯‘è¿‡ç¨‹ä¸­ä¿ç•™ï¼Œå¹¶ä¸å†™å…¥Classæ–‡ä»¶ä¸­ã€‚è¿™ç§æ³¨è§£ä¸»è¦ç”¨äºåœ¨æœ¬ç¼–è¯‘å•å…ƒï¼ˆè¿™é‡Œä¸€ä¸ªJavaæºç æ–‡ä»¶å¯ä»¥çœ‹ä½œä¸€ä¸ªç¼–è¯‘å•å…ƒï¼‰å†…è§¦å‘æ³¨è§£å¤„ç†å™¨ï¼ˆannotation processorï¼‰çš„ç›¸å…³å¤„ç†ï¼Œä¾‹å¦‚è¯´å¯ä»¥è®©æ³¨è§£å¤„ç†å™¨ç›¸åº”åœ°ç”Ÿæˆä¸€äº›ä»£ç ï¼Œæˆ–è€…æ˜¯è®©æ³¨è§£å¤„ç†å™¨åšä¸€äº›é¢å¤–çš„ç±»å‹æ£€æŸ¥(@Override)ï¼Œç­‰ç­‰ã€‚</p>
<p>RetentionPolicy.CLASSï¼šåœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ä¿ç•™å¹¶ä¸”ä¼šå†™å…¥Classæ–‡ä»¶ä¸­ï¼Œä½†æ˜¯JVMåœ¨åŠ è½½ç±»çš„æ—¶å€™ä¸éœ€è¦å°†å…¶åŠ è½½ä¸ºè¿è¡Œæ—¶å¯è§çš„ï¼ˆåå°„å¯è§ï¼‰çš„æ³¨è§£ã€‚è¿™é‡Œå¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯ç¼–è¯‘å¤šä¸ªJavaæ–‡ä»¶æ—¶çš„æƒ…å†µï¼šå‡å¦‚è¦ç¼–è¯‘A.javaæºç æ–‡ä»¶å’ŒB.classæ–‡ä»¶ï¼Œå…¶ä¸­Aç±»ä¾èµ–Bç±»ï¼Œå¹¶ä¸”Bç±»ä¸Šæœ‰äº›æ³¨è§£å¸Œæœ›è®©A.javaç¼–è¯‘æ—¶èƒ½çœ‹åˆ°ï¼Œé‚£ä¹ˆB.classé‡Œå°±å¿…é¡»è¦æŒæœ‰è¿™äº›æ³¨è§£ä¿¡æ¯æ‰è¡Œã€‚</p>
<ul>
<li>åŒæ—¶æˆ‘ä»¬å¯èƒ½ä¸éœ€è¦è®©å®ƒåœ¨è¿è¡Œæ—¶å¯¹åå°„å¯è§ï¼ˆä¾‹å¦‚è¯´ä¸ºäº†å‡å°‘è¿è¡Œæ—¶å…ƒæ•°æ®çš„å¤§å°ä¹‹ç±»ï¼‰ï¼Œæ‰€ä»¥ä¼šé€‰æ‹©CLASSè€Œä¸æ˜¯RUNTIMEã€‚</li>
</ul>
<p>RetentionPolicy.RUNTIMEï¼šåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä¿ç•™ï¼Œä¼šå†™å…¥Classæ–‡ä»¶ï¼Œå¹¶ä¸”JVMåŠ è½½ç±»çš„æ—¶å€™ä¹Ÿä¼šå°†å…¶åŠ è½½ä¸ºåå°„å¯è§çš„æ³¨è§£ã€‚è¿™å°±ä¸ç”¨å¤šè¯´äº†ï¼Œä¾‹å¦‚è¯´Springçš„ä¾èµ–æ³¨å…¥å°±ä¼šåœ¨è¿è¡Œæ—¶é€šè¿‡æ‰«æç±»ä¸Šçš„æ³¨è§£æ¥å†³å®šæ³¨å…¥å•¥ã€‚</p>
</blockquote>
</li>
<li><p>@Document </p>
<p>æè¿°javadoc</p>
</li>
<li><p>@Inherited  </p>
<p>å¦‚æœå€¼æ˜¯æ˜¯çš„è¯ è¢«æ ‡æ³¨äº†è¿™ä¸ªæ³¨è§£çš„ç±»çš„å­ç±»ä¹Ÿä¼šæœ‰è¿™ä¸ªæ³¨è§£</p>
</li>
</ul>
<h1 id="Spring-åŸç†"><a href="#Spring-åŸç†" class="headerlink" title="Spring åŸç†"></a>Spring åŸç†</h1><h2 id="Spring-Bean-ç”Ÿå‘½å‘¨æœŸ"><a href="#Spring-Bean-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Spring Bean ç”Ÿå‘½å‘¨æœŸ"></a>Spring Bean ç”Ÿå‘½å‘¨æœŸ</h2><p><img src="http://img.andrewchen1.top/181453414212066.png" alt="ç”Ÿå‘½å‘¨æœŸ"></p>
<p><img src="http://img.andrewchen1.top/181454040628981.png" alt="ç”Ÿå‘½å‘¨æœŸ"></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zrtqsk/p/3735273.html">ç”Ÿå‘½å‘¨æœŸ</a></p>
<h2 id="Beançš„å®šä¹‰"><a href="#Beançš„å®šä¹‰" class="headerlink" title="Beançš„å®šä¹‰"></a>Beançš„å®šä¹‰</h2><p>å¯ä»¥é€šè¿‡åœ¨xmlä¸­å®šä¹‰Bean</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span> = <span class="string">&quot;&quot;</span> <span class="attr">class</span> = <span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password]&#125;&quot;</span></span></span><br><span class="line">  &lt;/bean&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æˆ–è€…åœ¨ç±»ä¸Šé¢ä½¿ç”¨@Componentçš„æ³¨è§£ã€‚ é€šè¿‡ComponentScançš„æ–¹å¼è¦æ‰¾åˆ°ç›¸å…³çš„ç±»ã€‚æ’ä¸€å¥ ComponentScançš„æ€ä¹ˆåš</p>
<ul>
<li><p>ComponentScanAnnotationParser#parse</p>
</li>
<li><p>ClassPathBeanDefinitionScanner#doScan</p>
</li>
<li><p>ClassPathScanningCandidateComponentProvider#findCandidateComponents</p>
<p>â€‹    è¦åšçš„äº‹æƒ…å°±æ˜¯è¯»å–Classçš„æ–‡ä»¶æµï¼Œé€šè¿‡JVMä¸­classçš„å®šä¹‰è·å¾—å®ç°çš„æ¥å£ç­‰çš„ä¿¡æ¯ï¼Œç„¶åæŠŠè¿™äº›ä¿¡æ¯å†™å…¥åˆ°beandefinition å¯¹è±¡ä¸­ã€‚</p>
<ul>
<li><p>å°†class path ä¸­çš„.æ›¿æ¢æˆ/</p>
</li>
<li><p>æ‹¼è£…æˆ classpath<em>:ç»è¿‡è½¬æ¢çš„basePackageåœ°å€ +  **/\</em>.class</p>
</li>
<li><p>MetadataReaderFactory#getMetadataReader</p>
</li>
<li><p>SimpleMetadataReader#getMetadataReader</p>
</li>
<li><p>ClassReader#accept </p>
<p>è¿™é‡Œæ¶‰åŠåˆ°ASMçš„å†…å®¹<a target="_blank" rel="noopener" href="http://img.andrewchen1.top/ASM4%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97.pdf">ASM4ä½¿ç”¨æŒ‡å—</a> æ ¹æ®è§„èŒƒç¼–è¯‘åçš„classæ–‡ä»¶çš„æ ¼å¼æ˜¯å›ºå®šçš„ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ASMå·¥å…·æ¥ä»classæ–‡ä»¶ä¸­è¯»å–æˆ‘ä»¬å…³å¿ƒçš„ä¿¡æ¯ã€‚</p>
</li>
</ul>
<p>è¿”å›å«æœ‰çˆ¶ç±»ã€å®ç°æ¥å£ã€æ³¨è§£ç­‰ä¿¡æ¯çš„åŒ…è£…ç±»(RootBeanDefination)</p>
</li>
</ul>
<h2 id="ä»DefaultListableBeanFactory-ç®¡ä¸­çª¥è±¹-çœ‹Beançš„ç”Ÿå‘½æµç¨‹"><a href="#ä»DefaultListableBeanFactory-ç®¡ä¸­çª¥è±¹-çœ‹Beançš„ç”Ÿå‘½æµç¨‹" class="headerlink" title="ä»DefaultListableBeanFactory ç®¡ä¸­çª¥è±¹ çœ‹Beançš„ç”Ÿå‘½æµç¨‹"></a>ä»DefaultListableBeanFactory ç®¡ä¸­çª¥è±¹ çœ‹Beançš„ç”Ÿå‘½æµç¨‹</h2><p>å› ä¸ºBeanFactoryæ˜¯æ‡’åŠ è½½çš„ ï¼Œå½“æˆ‘ä»¬è°ƒç”¨getBean()çš„æ—¶å€™ï¼Œä¼š</p>
<ul>
<li><p>AbstractBeanFactory#doGetBean(inal String name, final Class<T> requiredType, final Object[] args, boolean typeCheckOnly)</p>
<ul>
<li><p>transformedBeanName</p>
<p>å¾—åˆ°bean Nameï¼Œå…¥å‚çš„beanNameä¸­å¦‚æœæœ‰&amp;ç¬¦å· æˆªå–åˆ°æœ€åä¸€ä¸ª&amp;å¼€å§‹åˆ°ç»“æŸçš„å­å­—ç¬¦ä¸²ä½œä¸ºbean name</p>
</li>
<li><p>DefaultSingletonBeanRegistry#getSingleton</p>
<h4 id="èƒŒæ™¯çŸ¥è¯†-Beançš„å¾ªç¯ä¾èµ–å’Œè§£å†³"><a href="#èƒŒæ™¯çŸ¥è¯†-Beançš„å¾ªç¯ä¾èµ–å’Œè§£å†³" class="headerlink" title="èƒŒæ™¯çŸ¥è¯† Beançš„å¾ªç¯ä¾èµ–å’Œè§£å†³"></a>èƒŒæ™¯çŸ¥è¯† Beançš„å¾ªç¯ä¾èµ–å’Œè§£å†³</h4><p>ä»¥ä¸‹å†…å®¹æ¥è‡ª <a target="_blank" rel="noopener" href="https://blog.csdn.net/u010853261/article/details/77940767">Spring-beançš„å¾ªç¯ä¾èµ–ä»¥åŠè§£å†³æ–¹å¼</a></p>
<p> Springçš„å•ä¾‹å¯¹è±¡çš„åˆå§‹åŒ–ä¸»è¦åˆ†ä¸ºä¸‰æ­¥ï¼š</p>
<ul>
<li><p>create Bean Instance å®ä¾‹åŒ–</p>
</li>
<li><p>popluate Bean å¡«å……å±æ€§</p>
</li>
<li><p>Initalize Bean åˆå§‹åŒ–</p>
<p>åœ¨Springå®¹å™¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“æƒ³åˆ°è¿™ä¸ªå¯¹è±¡åº”è¯¥å­˜åœ¨Cacheä¸­ï¼ŒSpringä¸ºäº†è§£å†³å•ä¾‹çš„å¾ªç¯ä¾èµ–é—®é¢˜ï¼Œä½¿ç”¨äº†<strong>ä¸‰çº§ç¼“å­˜</strong>ã€‚</p>
<p>DefaultSingletonBeanRegistry.class</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** Cache of singleton objects: bean name --&gt; bean instance */</span></span><br><span class="line"><span class="comment">// å•ä¾‹å¯¹è±¡çš„cache</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Map&lt;String, Object&gt; singletonObjects = <span class="keyword">new</span> ConcurrentHashMap&lt;String, Object&gt;(<span class="number">256</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Cache of singleton factories: bean name --&gt; ObjectFactory */</span></span><br><span class="line"><span class="comment">// å•ä¾‹å·¥å‚çš„cache </span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Map&lt;String, ObjectFactory&lt;?&gt;&gt; singletonFactories = <span class="keyword">new</span> HashMap&lt;String, ObjectFactory&lt;?&gt;&gt;(<span class="number">16</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Cache of early singleton objects: bean name --&gt; bean instance */</span></span><br><span class="line"><span class="comment">// æå‰æ›å…‰çš„å•ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Map&lt;String, Object&gt; earlySingletonObjects = <span class="keyword">new</span> HashMap&lt;String, Object&gt;(<span class="number">16</span>);</span><br></pre></td></tr></table></figure>

<p>å°è¯•ä»cacheä¸­è·å¾—å¯¹è±¡</p>
<p>DefaultSingletonBeanRegistry#getSingleton</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> Object <span class="title">getSingleton</span><span class="params">(String beanName, <span class="keyword">boolean</span> allowEarlyReference)</span> </span>&#123;</span><br><span class="line">    Object singletonObject = <span class="keyword">this</span>.singletonObjects.get(beanName);</span><br><span class="line">    <span class="keyword">if</span> (singletonObject == <span class="keyword">null</span> &amp;&amp; isSingletonCurrentlyInCreation(beanName)) &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="keyword">this</span>.singletonObjects) &#123;</span><br><span class="line">            singletonObject = <span class="keyword">this</span>.earlySingletonObjects.get(beanName);</span><br><span class="line">            <span class="keyword">if</span> (singletonObject == <span class="keyword">null</span> &amp;&amp; allowEarlyReference) &#123;</span><br><span class="line">                ObjectFactory&lt;?&gt; singletonFactory = <span class="keyword">this</span>.singletonFactories.get(beanName);</span><br><span class="line">                <span class="keyword">if</span> (singletonFactory != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    singletonObject = singletonFactory.getObject();</span><br><span class="line">                    <span class="keyword">this</span>.earlySingletonObjects.put(beanName, singletonObject);</span><br><span class="line">                    <span class="keyword">this</span>.singletonFactories.remove(beanName);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (singletonObject != NULL_OBJECT ? singletonObject : <span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä»£ç éœ€è¦è§£é‡Šä¸¤ä¸ªå‚æ•°ï¼š</p>
<p>isSingletonCurrentlyInCreation()åˆ¤æ–­å½“å‰å•ä¾‹beanæ˜¯å¦æ­£åœ¨åˆ›å»ºä¸­ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰åˆå§‹åŒ–å®Œæˆ(æ¯”å¦‚Açš„æ„é€ å™¨ä¾èµ–äº†Bå¯¹è±¡æ‰€ä»¥å¾—å…ˆå»åˆ›å»ºBå¯¹è±¡ï¼Œ æˆ–åˆ™åœ¨Açš„populateBeanè¿‡ç¨‹ä¸­ä¾èµ–äº†Bå¯¹è±¡ï¼Œå¾—å…ˆå»åˆ›å»ºBå¯¹è±¡ï¼Œè¿™æ—¶çš„Aå°±æ˜¯å¤„äºåˆ›å»ºä¸­çš„çŠ¶æ€ã€‚)<br>allowEarlyReference æ˜¯å¦å…è®¸ä»singletonFactoriesä¸­é€šè¿‡getObjectæ‹¿åˆ°å¯¹è±¡<br>åˆ†ægetSingleton()çš„æ•´ä¸ªè¿‡ç¨‹ï¼ŒSpringé¦–å…ˆä»ä¸€çº§ç¼“å­˜singletonObjectsä¸­è·å–ã€‚å¦‚æœè·å–ä¸åˆ°ï¼Œå¹¶ä¸”å¯¹è±¡æ­£åœ¨åˆ›å»ºä¸­ï¼Œå°±å†ä»äºŒçº§ç¼“å­˜earlySingletonObjectsä¸­è·å–ã€‚å¦‚æœè¿˜æ˜¯è·å–ä¸åˆ°ä¸”å…è®¸singletonFactoriesé€šè¿‡getObject()è·å–ï¼Œå°±ä»ä¸‰çº§ç¼“å­˜singletonFactory.getObject()(ä¸‰çº§ç¼“å­˜)è·å–ï¼Œå¦‚æœè·å–åˆ°äº†åˆ™ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.earlySingletonObjects.put(beanName, singletonObject);</span><br><span class="line"><span class="keyword">this</span>.singletonFactories.remove(beanName);</span><br></pre></td></tr></table></figure>


</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code> ä»singletonFactoriesä¸­ç§»é™¤ï¼Œå¹¶æ”¾å…¥earlySingletonObjectsä¸­ã€‚å…¶å®ä¹Ÿå°±æ˜¯ä»ä¸‰çº§ç¼“å­˜ç§»åŠ¨åˆ°äº†äºŒçº§ç¼“å­˜ã€‚

 ä»ä¸Šé¢ä¸‰çº§ç¼“å­˜çš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼ŒSpringè§£å†³å¾ªç¯ä¾èµ–çš„è¯€çªå°±åœ¨äºsingletonFactoriesè¿™ä¸ªä¸‰çº§cacheã€‚è¿™ä¸ªcacheçš„ç±»å‹æ˜¯ObjectFactoryï¼Œå®šä¹‰å¦‚ä¸‹ï¼š

 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ObjectFactory</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function">T <span class="title">getObject</span><span class="params">()</span> <span class="keyword">throws</span> BeansException</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


 è¿™ä¸ªæ¥å£åœ¨ä¸‹é¢è¢«å¼•ç”¨

 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">addSingletonFactory</span><span class="params">(String beanName, ObjectFactory&lt;?&gt; singletonFactory)</span> </span>&#123;</span><br><span class="line">    Assert.notNull(singletonFactory, <span class="string">&quot;Singleton factory must not be null&quot;</span>);</span><br><span class="line">    <span class="keyword">synchronized</span> (<span class="keyword">this</span>.singletonObjects) &#123;</span><br><span class="line">        <span class="keyword">if</span> (! <span class="keyword">this</span>.singletonObjects.containsKey(beanName)) &#123;</span><br><span class="line">            <span class="keyword">this</span>.singletonFactories.put(beanName, singletonFactory);</span><br><span class="line">            <span class="keyword">this</span>.earlySingletonObjects.remove(beanName);</span><br><span class="line">            <span class="keyword">this</span>.registeredSingletons.add(beanName);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

 è¿™é‡Œå°±æ˜¯è§£å†³å¾ªç¯ä¾èµ–çš„å…³é”®ï¼Œè¿™æ®µä»£ç å‘ç”Ÿåœ¨createBeanInstanceä¹‹åï¼Œä¹Ÿå°±æ˜¯è¯´å•ä¾‹å¯¹è±¡æ­¤æ—¶å·²ç»è¢«åˆ›å»ºå‡ºæ¥(è°ƒç”¨äº†æ„é€ å™¨)ã€‚è¿™ä¸ªå¯¹è±¡å·²ç»è¢«ç”Ÿäº§å‡ºæ¥äº†ï¼Œè™½ç„¶è¿˜ä¸å®Œç¾ï¼ˆè¿˜æ²¡æœ‰è¿›è¡Œåˆå§‹åŒ–çš„ç¬¬äºŒæ­¥å’Œç¬¬ä¸‰æ­¥ï¼‰ï¼Œä½†æ˜¯å·²ç»èƒ½è¢«äººè®¤å‡ºæ¥äº†ï¼ˆæ ¹æ®å¯¹è±¡å¼•ç”¨èƒ½å®šä½åˆ°å †ä¸­çš„å¯¹è±¡ï¼‰ï¼Œæ‰€ä»¥Springæ­¤æ—¶å°†è¿™ä¸ªå¯¹è±¡æå‰æ›å…‰å‡ºæ¥è®©å¤§å®¶è®¤è¯†ï¼Œè®©å¤§å®¶ä½¿ç”¨ã€‚



 è¿™æ ·åšæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿè®©æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹â€œAçš„æŸä¸ªfieldæˆ–è€…setterä¾èµ–äº†Bçš„å®ä¾‹å¯¹è±¡ï¼ŒåŒæ—¶Bçš„æŸä¸ªfieldæˆ–è€…setterä¾èµ–äº†Açš„å®ä¾‹å¯¹è±¡â€è¿™ç§å¾ªç¯ä¾èµ–çš„æƒ…å†µã€‚Aé¦–å…ˆå®Œæˆäº†åˆå§‹åŒ–çš„ç¬¬ä¸€æ­¥ï¼Œå¹¶ä¸”å°†è‡ªå·±æå‰æ›å…‰åˆ°singletonFactoriesä¸­ï¼Œæ­¤æ—¶è¿›è¡Œåˆå§‹åŒ–çš„ç¬¬äºŒæ­¥ï¼Œå‘ç°è‡ªå·±ä¾èµ–å¯¹è±¡Bï¼Œæ­¤æ—¶å°±å°è¯•å»get(B)ï¼Œå‘ç°Bè¿˜æ²¡æœ‰è¢«createï¼Œæ‰€ä»¥èµ°createæµç¨‹ï¼ŒBåœ¨åˆå§‹åŒ–ç¬¬ä¸€æ­¥çš„æ—¶å€™å‘ç°è‡ªå·±ä¾èµ–äº†å¯¹è±¡Aï¼Œäºæ˜¯å°è¯•get(A)ï¼Œå°è¯•ä¸€çº§ç¼“å­˜singletonObjects(è‚¯å®šæ²¡æœ‰ï¼Œå› ä¸ºAè¿˜æ²¡åˆå§‹åŒ–å®Œå…¨)ï¼Œå°è¯•äºŒçº§ç¼“å­˜earlySingletonObjectsï¼ˆä¹Ÿæ²¡æœ‰ï¼‰ï¼Œå°è¯•ä¸‰çº§ç¼“å­˜singletonFactoriesï¼Œç”±äºAé€šè¿‡ObjectFactoryå°†è‡ªå·±æå‰æ›å…‰äº†ï¼Œæ‰€ä»¥Bèƒ½å¤Ÿé€šè¿‡ObjectFactory.getObjectæ‹¿åˆ°Aå¯¹è±¡(è™½ç„¶Aè¿˜æ²¡æœ‰åˆå§‹åŒ–å®Œå…¨ï¼Œä½†æ˜¯æ€»æ¯”æ²¡æœ‰å¥½å‘€)ï¼ŒBæ‹¿åˆ°Aå¯¹è±¡åé¡ºåˆ©å®Œæˆäº†åˆå§‹åŒ–é˜¶æ®µ1ã€2ã€3ï¼Œå®Œå…¨åˆå§‹åŒ–ä¹‹åå°†è‡ªå·±æ”¾å…¥åˆ°ä¸€çº§ç¼“å­˜singletonObjectsä¸­ã€‚æ­¤æ—¶è¿”å›Aä¸­ï¼ŒAæ­¤æ—¶èƒ½æ‹¿åˆ°Bçš„å¯¹è±¡é¡ºåˆ©å®Œæˆè‡ªå·±çš„åˆå§‹åŒ–é˜¶æ®µ2ã€3ï¼Œæœ€ç»ˆAä¹Ÿå®Œæˆäº†åˆå§‹åŒ–ï¼Œè¿›å»äº†ä¸€çº§ç¼“å­˜singletonObjectsä¸­ï¼Œè€Œä¸”æ›´åŠ å¹¸è¿çš„æ˜¯ï¼Œç”±äºBæ‹¿åˆ°äº†Açš„å¯¹è±¡å¼•ç”¨ï¼Œæ‰€ä»¥Bç°åœ¨holdä½çš„Aå¯¹è±¡å®Œæˆäº†åˆå§‹åŒ–ã€‚

 çŸ¥é“äº†è¿™ä¸ªåŸç†æ—¶å€™ï¼Œè‚¯å®šå°±çŸ¥é“ä¸ºå•¥Springä¸èƒ½è§£å†³â€œAçš„æ„é€ æ–¹æ³•ä¸­ä¾èµ–äº†Bçš„å®ä¾‹å¯¹è±¡ï¼ŒåŒæ—¶Bçš„æ„é€ æ–¹æ³•ä¸­ä¾èµ–äº†Açš„å®ä¾‹å¯¹è±¡â€è¿™ç±»é—®é¢˜äº†ï¼å› ä¸ºåŠ å…¥singletonFactoriesä¸‰çº§ç¼“å­˜çš„å‰ææ˜¯æ‰§è¡Œäº†æ„é€ å™¨ï¼Œæ‰€ä»¥æ„é€ å™¨çš„å¾ªç¯ä¾èµ–æ²¡æ³•è§£å†³ã€‚

 å‚è€ƒ http://www.jianshu.com/p/6c359768b1dc

å¦‚æœåœ¨ä¸‰çº§ç¼“å­˜ä¸­æ‰¾åˆ°äº† å†é€šè¿‡BeanNameåšä¸€æ¬¡åˆ¤æ–­ åˆ¤æ–­è¿™ä¸ª æˆ‘ä»¬æƒ³è¦çš„æ˜¯è¿™ä¸ªbean è¿˜æ˜¯ç”Ÿæˆè¿™ä¸ªbeançš„factoryã€‚ åœ¨æœ€åˆçš„æ—¶å€™æˆ‘ä»¬æ˜¯æŠŠbean name ç»™å¤„ç†äº†ä¸€æ¬¡çš„ çœ‹ä¸Šé¢çš„**transformedBeanName** è¯´æ˜ã€‚</code></pre><ul>
<li><p>getObjectForBeanInstance</p>
<p>åœ¨ä¹‹å‰æˆ‘ä»¬åœ¨cacheä¸­æ‰¾åˆ°äº†beanã€‚ä½†æ˜¯è¿™ä¸ªbeanå¯èƒ½æ˜¯factoryBeanã€‚ æˆ‘ä»¬éœ€è¦é€šè¿‡å·¥å‚Bean è·å¾—äº§å“Bean</p>
<p>AbstractBeanFactory#getObjectForBeanInstance</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> Object <span class="title">getObjectForBeanInstance</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">			Object beanInstance, String name, String beanName, RootBeanDefinition mbd)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Don&#x27;t let calling code try to dereference the factory if the bean isn&#x27;t a factory.</span></span><br><span class="line">  <span class="comment">// å› ä¸ºåœ¨å°è¯•è·å¾—beançš„ä½¿ç”¨beançš„åå­—æ˜¯å»æ‰&amp;ç¬¦å·çš„ã€‚&amp;è¡¨ç¤ºå·¥å‚beanã€‚ ä½†æ˜¯æ ¹æ®è¿™ä¸ªbeanNameè·å–é“çš„å¹¶ä¸æ˜¯FactoryBeançš„ æŠ›é”™</span></span><br><span class="line">		<span class="keyword">if</span> (BeanFactoryUtils.isFactoryDereference(name) &amp;&amp; !(beanInstance <span class="keyword">instanceof</span> FactoryBean)) &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> BeanIsNotAFactoryException(transformedBeanName(name), beanInstance.getClass());</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// Now we have the bean instance, which may be a normal bean or a FactoryBean.</span></span><br><span class="line">		<span class="comment">// If it&#x27;s a FactoryBean, we use it to create a bean instance, unless the</span></span><br><span class="line">		<span class="comment">// caller actually wants a reference to the factory.</span></span><br><span class="line">  <span class="comment">// ç›¸å½“äº ! beanInstance instanceof FactoryBean &amp;&amp; ! BeanFactoryUtils.isFactoryDereference(name) ç¡®å®š åå­—å¹¶ä¸æ˜¯BeanFactoryç±»å‹çš„ ä¸” å¾—åˆ°çš„ç±»å¹¶ä¸æ˜¯å·¥å‚ç±»å‹çš„ï¼Œ return bean</span></span><br><span class="line">		<span class="keyword">if</span> (!(beanInstance <span class="keyword">instanceof</span> FactoryBean) || BeanFactoryUtils.isFactoryDereference(name)) &#123;</span><br><span class="line">			<span class="keyword">return</span> beanInstance;</span><br><span class="line">		&#125;</span><br><span class="line"><span class="comment">// å¦åˆ™å°±æ˜¯é€šè¿‡BeanFactoryæ„å»ºBean</span></span><br><span class="line">		Object object = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">if</span> (mbd == <span class="keyword">null</span>) &#123;</span><br><span class="line">			object = getCachedObjectForFactoryBean(beanName);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (object == <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="comment">// Return bean instance from factory.</span></span><br><span class="line">			FactoryBean&lt;?&gt; factory = (FactoryBean&lt;?&gt;) beanInstance;</span><br><span class="line">			<span class="comment">// Caches object obtained from FactoryBean if it is a singleton.</span></span><br><span class="line">			<span class="keyword">if</span> (mbd == <span class="keyword">null</span> &amp;&amp; containsBeanDefinition(beanName)) &#123;</span><br><span class="line">				mbd = getMergedLocalBeanDefinition(beanName);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">boolean</span> synthetic = (mbd != <span class="keyword">null</span> &amp;&amp; mbd.isSynthetic());</span><br><span class="line">			object = getObjectFromFactoryBean(factory, beanName, !synthetic);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> object;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡getObjectFromFactoryBeanè·å¾—Beanï¼Œåœ¨factoryBeanObjectCacheä¸­æ˜¯ä¸æ˜¯å·²ç»å­˜åœ¨Beanäº†ï¼Œå¦‚æœå­˜åœ¨ç›´æ¥è¿”å›ï¼Œ å¦‚æœæ²¡æœ‰ é€šè¿‡BeanFactory æ„å»ºï¼Œæ„å»ºçš„Beanè¿˜æ˜¯è¦AbstractAutowireCapableBeanFactory#applyBeanPostProcessorsAfterInitialization è¿›è¡Œç»„è£…ã€‚ åŒæ—¶æ ¹æ®factory bean æ˜¯å¦æ˜¯isSingletonçš„æ¥ç¡®å®šæ˜¯å¦è¦åŠ å…¥åˆ°factoryBeanObjectCacheä¸­</p>
<p>FactoryBeanRegistrySupport#getObjectFromFactoryBean</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Obtain an object to expose from the given FactoryBean.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> factory the FactoryBean instance</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> beanName the name of the bean</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> shouldPostProcess whether the bean is subject to post-processing</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the object obtained from the FactoryBean</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@throws</span> BeanCreationException if FactoryBean object creation failed</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> org.springframework.beans.factory.FactoryBean#getObject()</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> Object <span class="title">getObjectFromFactoryBean</span><span class="params">(FactoryBean&lt;?&gt; factory, String beanName, <span class="keyword">boolean</span> shouldPostProcess)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (factory.isSingleton() &amp;&amp; containsSingleton(beanName)) &#123;</span><br><span class="line">			<span class="keyword">synchronized</span> (getSingletonMutex()) &#123;</span><br><span class="line">				Object object = <span class="keyword">this</span>.factoryBeanObjectCache.get(beanName);</span><br><span class="line">				<span class="keyword">if</span> (object == <span class="keyword">null</span>) &#123;</span><br><span class="line">					object = doGetObjectFromFactoryBean(factory, beanName);</span><br><span class="line">					<span class="comment">// Only post-process and store if not put there already during getObject() call above</span></span><br><span class="line">					<span class="comment">// (e.g. because of circular reference processing triggered by custom getBean calls)</span></span><br><span class="line">					Object alreadyThere = <span class="keyword">this</span>.factoryBeanObjectCache.get(beanName);</span><br><span class="line">					<span class="keyword">if</span> (alreadyThere != <span class="keyword">null</span>) &#123;</span><br><span class="line">						object = alreadyThere;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span> &#123;</span><br><span class="line">						<span class="keyword">if</span> (object != <span class="keyword">null</span> &amp;&amp; shouldPostProcess) &#123;</span><br><span class="line">							<span class="keyword">if</span> (isSingletonCurrentlyInCreation(beanName)) &#123;</span><br><span class="line">								<span class="comment">// Temporarily return non-post-processed object, not storing it yet..</span></span><br><span class="line">								<span class="keyword">return</span> object;</span><br><span class="line">							&#125;</span><br><span class="line">							beforeSingletonCreation(beanName);</span><br><span class="line">							<span class="keyword">try</span> &#123;</span><br><span class="line">								object = postProcessObjectFromFactoryBean(object, beanName);</span><br><span class="line">							&#125;</span><br><span class="line">							<span class="keyword">catch</span> (Throwable ex) &#123;</span><br><span class="line">								<span class="keyword">throw</span> <span class="keyword">new</span> BeanCreationException(beanName,</span><br><span class="line">										<span class="string">&quot;Post-processing of FactoryBean&#x27;s singleton object failed&quot;</span>, ex);</span><br><span class="line">							&#125;</span><br><span class="line">							<span class="keyword">finally</span> &#123;</span><br><span class="line">								afterSingletonCreation(beanName);</span><br><span class="line">							&#125;</span><br><span class="line">						&#125;</span><br><span class="line">						<span class="keyword">if</span> (containsSingleton(beanName)) &#123;</span><br><span class="line">							<span class="keyword">this</span>.factoryBeanObjectCache.put(beanName, (object != <span class="keyword">null</span> ? object : NULL_OBJECT));</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">return</span> (object != NULL_OBJECT ? object : <span class="keyword">null</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			Object object = doGetObjectFromFactoryBean(factory, beanName);</span><br><span class="line">			<span class="keyword">if</span> (object != <span class="keyword">null</span> &amp;&amp; shouldPostProcess) &#123;</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					object = postProcessObjectFromFactoryBean(object, beanName);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">catch</span> (Throwable ex) &#123;</span><br><span class="line">					<span class="keyword">throw</span> <span class="keyword">new</span> BeanCreationException(beanName, <span class="string">&quot;Post-processing of FactoryBean&#x27;s object failed&quot;</span>, ex);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> object;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¦‚æœè¿™ä¸ªBeanåœ¨è¿™ä¹‹å‰æ²¡æœ‰åˆ›å»ºè¿‡ï¼Œé‚£ä¹ˆè¦è¿›è¡Œåˆ›å»ºã€‚</p>
<ul>
<li><p>å¦‚æœè¿™ä¸ªBeanfactroyæœ‰parent Bean factoryçš„è¯ã€‚ é‚£ä¹ˆé€šè¿‡å§”æ‰˜çš„æ–¹å¼çœ‹èƒ½ä¸èƒ½å¾—åˆ°bean</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Check if bean definition exists in this factory.</span></span><br><span class="line">			BeanFactory parentBeanFactory = getParentBeanFactory();</span><br><span class="line">			<span class="keyword">if</span> (parentBeanFactory != <span class="keyword">null</span> &amp;&amp; !containsBeanDefinition(beanName)) &#123;</span><br><span class="line">				<span class="comment">// Not found -&gt; check parent.</span></span><br><span class="line">				String nameToLookup = originalBeanName(name);</span><br><span class="line">				<span class="keyword">if</span> (args != <span class="keyword">null</span>) &#123;</span><br><span class="line">					<span class="comment">// Delegation to parent with explicit args.</span></span><br><span class="line">					<span class="keyword">return</span> (T) parentBeanFactory.getBean(nameToLookup, args);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="comment">// No args -&gt; delegate to standard getBean method.</span></span><br><span class="line">					<span class="keyword">return</span> parentBeanFactory.getBean(nameToLookup, requiredType);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>ä¿è¯åˆ›å»ºè¿™ä¸ªbeançš„æ—¶å€™ï¼Œå®ƒæ„é€ æ–¹æ³•ä¸­çš„Beanéƒ½å·²ç»åˆ›å»ºå¥½äº†</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">String[] dependsOn = mbd.getDependsOn();</span><br><span class="line">				<span class="keyword">if</span> (dependsOn != <span class="keyword">null</span>) &#123;</span><br><span class="line">					<span class="keyword">for</span> (String dep : dependsOn) &#123;</span><br><span class="line">						<span class="keyword">if</span> (isDependent(beanName, dep)) &#123;</span><br><span class="line">							<span class="keyword">throw</span> <span class="keyword">new</span> BeanCreationException(mbd.getResourceDescription(), beanName,</span><br><span class="line">									<span class="string">&quot;Circular depends-on relationship between &#x27;&quot;</span> + beanName + <span class="string">&quot;&#x27; and &#x27;&quot;</span> + dep + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">						&#125;</span><br><span class="line">						registerDependentBean(dep, beanName);</span><br><span class="line">						<span class="keyword">try</span> &#123;</span><br><span class="line">							getBean(dep);</span><br><span class="line">						&#125;</span><br><span class="line">						<span class="keyword">catch</span> (NoSuchBeanDefinitionException ex) &#123;</span><br><span class="line">							<span class="keyword">throw</span> <span class="keyword">new</span> BeanCreationException(mbd.getResourceDescription(), beanName,</span><br><span class="line">									<span class="string">&quot;&#x27;&quot;</span> + beanName + <span class="string">&quot;&#x27; depends on missing bean &#x27;&quot;</span> + dep + <span class="string">&quot;&#x27;&quot;</span>, ex);</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>DefaultSingletonBeanRegistry#isDependent</p>
<p>é€šè¿‡é€’å½’çš„æ–¹å¼è¿›è¡Œè°ƒç”¨ ä¿è¯è¿™ä¸ªBean æ„é€ æ–¹æ³•ä¸­æ‰€ä¾èµ–çš„Beanï¼ŒBean æ„é€ æ–¹æ³•ä¸­æ‰€ä¾èµ–çš„Beançš„æ„é€ æ–¹æ³•ä¸­ï¼ˆå¦‚æœè¿™ä¸ªBeanè¿˜æ²¡æœ‰è¢«åˆ›å»ºçš„è¯ï¼‰æ‰€ä¾èµ–çš„Beanâ€¦ éƒ½å·²ç»å‡†å¤‡å¥½äº†ï¼Œå¦åˆ™æŠ¥é”™ğŸ’¥</p>
<p>*<em>è¿™é‡Œå°±æ˜¾ç¤ºäº†é€šè¿‡æ„é€ æ–¹æ³•ï¼Œä¾èµ–æ³¨å…¥çš„æ–¹å¼åˆ›å»ºBeanï¼ŒBeanä¹‹é—´ä¸å…è®¸äº’ç›¸ä¾èµ–ï¼Œä½†æ˜¯é€šè¿‡setterçš„æ–¹å¼ï¼Œä¾èµ–æ³¨å…¥Beanï¼Œ Beanä¹‹é—´æ˜¯å…è®¸ *</em></p>
<p>ç‰¹åˆ«è¯´æ˜</p>
<p><strong>ä¸¾ä¸ªç®€å•ä¾‹å­ï¼šä¾‹å¦‚ B ä¾èµ–äº† Aï¼Œåˆ™ dependentBeanMap ç¼“å­˜ä¸­åº”è¯¥å­˜æ”¾ä¸€å¯¹æ˜ å°„ï¼šå…¶ä¸­ key ä¸º Aï¼Œvalue ä¸ºå«æœ‰ B çš„ Setï¼›è€Œ dependenciesForBeanMap ç¼“å­˜ä¸­ä¹Ÿåº”è¯¥å­˜æ”¾ä¸€å¯¹æ˜ å°„ï¼šå…¶ä¸­ key ä¸ºï¼šBï¼Œvalue ä¸ºå«æœ‰ A çš„ Setã€‚</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">      <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isDependent</span><span class="params">(String beanName, String dependentBeanName, Set&lt;String&gt; alreadySeen)</span> </span>&#123;</span><br><span class="line">      		<span class="keyword">if</span> (alreadySeen != <span class="keyword">null</span> &amp;&amp; alreadySeen.contains(beanName)) &#123;</span><br><span class="line">      			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">      		&#125;</span><br><span class="line">      		String canonicalName = canonicalName(beanName);</span><br><span class="line">      		Set&lt;String&gt; dependentBeans = <span class="keyword">this</span>.dependentBeanMap.get(canonicalName);</span><br><span class="line">      		<span class="keyword">if</span> (dependentBeans == <span class="keyword">null</span>) &#123;</span><br><span class="line">      			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">      		&#125;</span><br><span class="line">      		<span class="keyword">if</span> (dependentBeans.contains(dependentBeanName)) &#123;</span><br><span class="line">      			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">      		&#125;</span><br><span class="line">      		<span class="keyword">for</span> (String transitiveDependency : dependentBeans) &#123;</span><br><span class="line">      			<span class="keyword">if</span> (alreadySeen == <span class="keyword">null</span>) &#123;</span><br><span class="line">      				alreadySeen = <span class="keyword">new</span> HashSet&lt;String&gt;();</span><br><span class="line">      			&#125;</span><br><span class="line">      			alreadySeen.add(beanName);</span><br><span class="line">      			<span class="keyword">if</span> (isDependent(transitiveDependency, dependentBeanName, alreadySeen)) &#123;</span><br><span class="line">      				<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">      			&#125;</span><br><span class="line">&#125;</span><br><span class="line">      		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">      	&#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol start="2">
<li><p>BeanFactoryPostProcessor</p>
<p>å°†${}ä¸­çš„å€¼åšæ›¿æ¢æˆ*.propertiesä¸­çš„å†…å®¹</p>
</li>
<li><p>InstantiationAwareBeanPostProcessor#postProcessBeforInstantiation </p>
<p>Instantiation [ÉªnstÃ¦nÊƒÉªâ€™eÉªÊƒÉ™n] </p>
<p>æ‰§è¡ŒBeançš„æ„é€ å™¨</p>
</li>
<li><p>InstantiationAwareBeanPostProcessor#postProcessPropertyValue</p>
<p>æ ¹æ®xmlä¸­çš„å®šä¹‰è®¾ç½®propertyçš„å€¼</p>
</li>
<li><p>ApplicationContextAwareProcessor#postProcessBeforeInitialization</p>
<p>ApplicationContextAwareProcessoræ˜¯BeanPostProcessorçš„ä¸€ä¸ªå®ç° åœ¨å†…éƒ¨ä¼šè°ƒç”¨invokeAwareInterfacesæ–¹æ³• é‡Œé¢ä¼šæœ‰å¾ˆå¤šçš„if æ¥åˆ¤æ–­è¿™ä¸ªç±»æ˜¯ä¸æ˜¯ç‰¹å®šçš„awareç±»å‹ï¼Œæ¯”æ–¹è¯´</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (object <span class="keyword">instanceof</span> ApplicationContextAware) &#123;</span><br><span class="line">  ((ApplicationContextAware) object).setApplicationContext();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Java/" rel="tag"># Java</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2019/08/11/Java-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%863/" rel="prev" title="Java åŸºç¡€çŸ¥è¯†ç‚¹æ•´ç†3">
      <i class="fa fa-chevron-left"></i> Java åŸºç¡€çŸ¥è¯†ç‚¹æ•´ç†3
    </a></div>
      <div class="post-nav-item">
    <a href="/2019/09/13/spring%E6%8F%AD%E7%A7%98-%E6%8E%8C%E7%AE%A1%E5%A4%A7%E5%B1%80%E7%9A%84Ioc/" rel="next" title="springæ­ç§˜-æŒç®¡å¤§å±€çš„Ioc">
      springæ­ç§˜-æŒç®¡å¤§å±€çš„Ioc <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Java%E5%BC%82%E5%B8%B8%E5%88%86%E7%B1%BB%E5%92%8C%E5%A4%84%E7%90%86"><span class="nav-number">1.</span> <span class="nav-text">Javaå¼‚å¸¸åˆ†ç±»å’Œå¤„ç†</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Java%E6%B3%A8%E8%A7%A3"><span class="nav-number">1.1.</span> <span class="nav-text">Javaæ³¨è§£</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Spring-%E5%8E%9F%E7%90%86"><span class="nav-number">2.</span> <span class="nav-text">Spring åŸç†</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-Bean-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">2.1.</span> <span class="nav-text">Spring Bean ç”Ÿå‘½å‘¨æœŸ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Bean%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="nav-number">2.2.</span> <span class="nav-text">Beançš„å®šä¹‰</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8EDefaultListableBeanFactory-%E7%AE%A1%E4%B8%AD%E7%AA%A5%E8%B1%B9-%E7%9C%8BBean%E7%9A%84%E7%94%9F%E5%91%BD%E6%B5%81%E7%A8%8B"><span class="nav-number">2.3.</span> <span class="nav-text">ä»DefaultListableBeanFactory ç®¡ä¸­çª¥è±¹ çœ‹Beançš„ç”Ÿå‘½æµç¨‹</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%83%8C%E6%99%AF%E7%9F%A5%E8%AF%86-Bean%E7%9A%84%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E5%92%8C%E8%A7%A3%E5%86%B3"><span class="nav-number">2.3.0.1.</span> <span class="nav-text">èƒŒæ™¯çŸ¥è¯† Beançš„å¾ªç¯ä¾èµ–å’Œè§£å†³</span></a></li></ol></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="å°å¤«"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">å°å¤«</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">31</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/andrewchen1" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;andrewchen1" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:andrewchen7@outlook.com" title="E-Mail â†’ mailto:andrewchen7@outlook.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/312228489" title="Weibo â†’ https:&#x2F;&#x2F;weibo.com&#x2F;312228489" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
  <div class="beian"><a href="http://www.beian.miit.gov.cn/" rel="noopener" target="_blank">æµ™ICPå¤‡18051892å· </a>
  </div>

<div class="copyright">
  
  &copy; 2018 â€“ 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">å°å¤«</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
